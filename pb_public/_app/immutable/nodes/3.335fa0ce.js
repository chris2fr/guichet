import{c as x,e as S}from"../chunks/index.08437746.js";import{s as U,n as q}from"../chunks/scheduler.6b0283ec.js";import{S as V,i as W,g as b,h as E,j as y,f as g,a as B,z as h,x as X,m as H,s as j,n as R,c as w,k as z,o as C,B as Z,d as P,b as ee,t as Y,r as te,u as le,v as ae,w as ne,p as oe}from"../chunks/index.d03f1b61.js";const re=async function({params:{coll:c,id:e}}){return{logs:await x.collection("auditlog").getFullList({filter:`record="${e}" && collection="${c}"`,expand:"user"})}},ge=Object.freeze(Object.defineProperty({__proto__:null,load:re},Symbol.toStringTag,{value:"Module"}));function G(c,e,o){const n=c.slice();return n[2]=e[o],n}function I(c){let e,o,n=c[2]+"",a,r,u,t,l=c[0].original[c[2]]+"",$,d,s,f,i=c[0].data[c[2]]+"",p,k;return{c(){e=b("tr"),o=b("th"),a=H(n),r=j(),u=b("td"),t=b("pre"),$=H(l),d=j(),s=b("td"),f=b("pre"),p=H(i),k=j(),this.h()},l(m){e=E(m,"TR",{});var T=y(e);o=E(T,"TH",{});var D=y(o);a=R(D,n),D.forEach(g),r=w(T),u=E(T,"TD",{});var M=y(u);t=E(M,"PRE",{class:!0});var _=y(t);$=R(_,l),_.forEach(g),M.forEach(g),d=w(T),s=E(T,"TD",{});var v=y(s);f=E(v,"PRE",{class:!0});var L=y(f);p=R(L,i),L.forEach(g),v.forEach(g),k=w(T),T.forEach(g),this.h()},h(){z(t,"class","svelte-1ym7c5j"),z(f,"class","svelte-1ym7c5j")},m(m,T){B(m,e,T),h(e,o),h(o,a),h(e,r),h(e,u),h(u,t),h(t,$),h(e,d),h(e,s),h(s,f),h(f,p),h(e,k)},p(m,T){T&2&&n!==(n=m[2]+"")&&C(a,n),T&3&&l!==(l=m[0].original[m[2]]+"")&&C($,l),T&3&&i!==(i=m[0].data[m[2]]+"")&&C(p,i)},d(m){m&&g(e)}}}function se(c){let e,o,n=S(c[1]),a=[];for(let r=0;r<n.length;r+=1)a[r]=I(G(c,n,r));return{c(){e=b("table"),o=b("tbody");for(let r=0;r<a.length;r+=1)a[r].c()},l(r){e=E(r,"TABLE",{});var u=y(e);o=E(u,"TBODY",{});var t=y(o);for(let l=0;l<a.length;l+=1)a[l].l(t);t.forEach(g),u.forEach(g)},m(r,u){B(r,e,u),h(e,o);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(o,null)},p(r,[u]){if(u&3){n=S(r[1]);let t;for(t=0;t<n.length;t+=1){const l=G(r,n,t);a[t]?a[t].p(l,u):(a[t]=I(l),a[t].c(),a[t].m(o,null))}for(;t<a.length;t+=1)a[t].d(1);a.length=n.length}},i:q,o:q,d(r){r&&g(e),X(a,r)}}}function ie(c,e,o){let n,{auditlog:a}=e;return c.$$set=r=>{"auditlog"in r&&o(0,a=r.auditlog)},c.$$.update=()=>{c.$$.dirty&1&&o(1,n=Object.keys(a.original||{}))},[a,n]}class ce extends V{constructor(e){super(),W(this,e,ie,se,U,{auditlog:0})}}function J(c,e,o){const n=c.slice();return n[1]=e[o],n}function K(c){let e,o='<td colspan="3">No records found.</td> ';return{c(){e=b("tr"),e.innerHTML=o},l(n){e=E(n,"TR",{"data-svelte-h":!0}),Z(e)!=="svelte-14ryxbm"&&(e.innerHTML=o)},m(n,a){B(n,e,a)},p:q,d(n){n&&g(e)}}}function Q(c){var M;let e,o,n=c[1].updated+"",a,r,u,t=c[1].event+"",l,$,d,s=(c[1].admin||((M=c[1].expand.user)==null?void 0:M.name)||c[1].user)+"",f,i,p,k,m,T,D;return m=new ce({props:{auditlog:c[1]}}),{c(){e=b("tr"),o=b("td"),a=H(n),r=j(),u=b("td"),l=H(t),$=j(),d=b("td"),f=H(s),i=j(),p=b("tr"),k=b("td"),te(m.$$.fragment),T=j(),this.h()},l(_){e=E(_,"TR",{});var v=y(e);o=E(v,"TD",{});var L=y(o);a=R(L,n),L.forEach(g),r=w(v),u=E(v,"TD",{});var O=y(u);l=R(O,t),O.forEach(g),$=w(v),d=E(v,"TD",{});var F=y(d);f=R(F,s),F.forEach(g),v.forEach(g),i=w(_),p=E(_,"TR",{});var A=y(p);k=E(A,"TD",{colspan:!0});var N=y(k);le(m.$$.fragment,N),N.forEach(g),T=w(A),A.forEach(g),this.h()},h(){z(k,"colspan","3")},m(_,v){B(_,e,v),h(e,o),h(o,a),h(e,r),h(e,u),h(u,l),h(e,$),h(e,d),h(d,f),B(_,i,v),B(_,p,v),h(p,k),ae(m,k,null),h(p,T),D=!0},p(_,v){var O;(!D||v&1)&&n!==(n=_[1].updated+"")&&C(a,n),(!D||v&1)&&t!==(t=_[1].event+"")&&C(l,t),(!D||v&1)&&s!==(s=(_[1].admin||((O=_[1].expand.user)==null?void 0:O.name)||_[1].user)+"")&&C(f,s);const L={};v&1&&(L.auditlog=_[1]),m.$set(L)},i(_){D||(P(m.$$.fragment,_),D=!0)},o(_){Y(m.$$.fragment,_),D=!1},d(_){_&&(g(e),g(i),g(p)),ne(m)}}}function fe(c){let e,o,n="<th>when</th> <th>what</th> <th>who</th>",a,r,u,t=S(c[0].logs),l=[];for(let s=0;s<t.length;s+=1)l[s]=Q(J(c,t,s));const $=s=>Y(l[s],1,1,()=>{l[s]=null});let d=null;return t.length||(d=K()),{c(){e=b("table"),o=b("thead"),o.innerHTML=n,a=j(),r=b("tbody");for(let s=0;s<l.length;s+=1)l[s].c();d&&d.c()},l(s){e=E(s,"TABLE",{});var f=y(e);o=E(f,"THEAD",{"data-svelte-h":!0}),Z(o)!=="svelte-1q8g7kt"&&(o.innerHTML=n),a=w(f),r=E(f,"TBODY",{});var i=y(r);for(let p=0;p<l.length;p+=1)l[p].l(i);d&&d.l(i),i.forEach(g),f.forEach(g)},m(s,f){B(s,e,f),h(e,o),h(e,a),h(e,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(r,null);d&&d.m(r,null),u=!0},p(s,[f]){if(f&1){t=S(s[0].logs);let i;for(i=0;i<t.length;i+=1){const p=J(s,t,i);l[i]?(l[i].p(p,f),P(l[i],1)):(l[i]=Q(p),l[i].c(),P(l[i],1),l[i].m(r,null))}for(oe(),i=t.length;i<l.length;i+=1)$(i);ee(),!t.length&&d?d.p(s,f):t.length?d&&(d.d(1),d=null):(d=K(),d.c(),d.m(r,null))}},i(s){if(!u){for(let f=0;f<t.length;f+=1)P(l[f]);u=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)Y(l[f]);u=!1},d(s){s&&g(e),X(l,s),d&&d.d()}}}function de(c,e,o){let{data:n}=e;return c.$$set=a=>{"data"in a&&o(0,n=a.data)},[n]}class me extends V{constructor(e){super(),W(this,e,de,fe,U,{data:0})}}export{me as component,ge as universal};
