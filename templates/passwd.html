{{define "title"}}Mot de passe |{{end}}
{{define "admenu"}}
{{if .Login.CanAdmin}}
<li><a href="/admin/activate">Administrer LDAP</a>
<ul class="submenu">
  <li><a href="/admin/activate">Activer des Utilisateur·ices</a></li>
  <li><a href="/admin/users">Utilisateur·ices</a></li>
  <li><a href="/admin/groups">Groupes</a></li>
</ul>
</li>
{{end}}
{{if .Login}}
<li><a href="/logout">Se déconnecter</a></li>
{{else}}
<li><a href="/">Se connecter</a>
  <ul class="submenu">
    <li><a href="/">Se connecter</a></li>
    <li><a href="/gpas">Mal de passe oublié</a></li>
    <li><a href="/invite/new_account">S'enregistrer</a></li>
  </ul>
</li>
{{end}}
{{end}}

{{define "admenu"}}
{{if .Login.CanAdmin}}
<li><a href="/admin/activate">Administrer LDAP</a>
<ul class="submenu">
  <li><a href="/admin/activate">Activer des Utilisateur·ices</a></li>
  <li><a href="/admin/users">Utilisateur·ices</a></li>
  <li><a href="/admin/groups">Groupes</a></li>
</ul>
</li>
{{end}}
{{if .Login}}
<li><a href="/logout">Se déconnecter</a></li>
{{else}}
<li><a href="/">Se connecter</a>
  <ul class="submenu">
    <li><a href="/">Se connecter</a></li>
    <li><a href="/gpas">Mal de passe oublié</a></li>
    <li><a href="/invite/new_account">S'enregistrer</a></li>
  </ul>
</li>
{{end}}
{{end}}

{{define "body"}}
<div class="d-flex">
  <h2>Modifier mon mot de passe</h2>
</div>

  {{if .ErrorMessage}}
    <div class="alert alert-danger mt-4">Impossible d'effectuer la modification.
      <div style="font-size: 0.8em">{{ .ErrorMessage }}</div>
    </div>
  {{end}}
  {{if .Success}}
    <div class="alert alert-success mt-4">
       Nouveau mot de passe enregistré.
    </div>
  {{else}}
    <form method="POST" class="mt-4">
      <div class="form-group">
        <label for="password">Nouveau mot de passe :</label>
        <input type="password" id="password" name="password" class="form-control" />
      </div>
      {{if .TooShortError}}
        <div class="alert alert-warning">
          Le mot de passe choisi est trop court (minimum 8 caractères).
        </div>
      {{end}}
      <div class="form-group">
        <label for="password2">Répéter le mot de passe :</label>
        <input type="password" id="password2" name="password2" class="form-control" />
      </div>
      {{if .NoMatchError}}
        <div class="alert alert-warning">
          Les deux mots de passe entrés ne correspondent pas.
        </div>
      {{end}}
      <button type="submit" class="btn btn-primary">Changer de mot de passe</button>
    </form>
  {{end}}
{{end}}
